# /pushlite_smart - LLM-First Smart PR Creation

**Purpose**: Demonstrates the new LLM-first approach where Claude generates smart PR content and passes it to streamlined pushlite.sh

## Workflow

1. **Analyze Current Changes**: Use git diff vs origin/main to understand what changed
2. **Generate Smart Content**: Create intelligent PR title, description, and labels
3. **Execute Streamlined Push**: Call pushlite_streamlined.sh with pre-generated content

## Implementation

```bash
#!/bin/bash
# This command demonstrates LLM-first PR intelligence

# Step 1: Analyze git diff vs origin/main
echo "üîç Analyzing changes vs origin/main..."

# Get basic stats
file_count=$(git diff --name-only origin/main...HEAD | wc -l)
lines_added=$(git diff --shortstat origin/main...HEAD | grep -o '[0-9]* insertion' | grep -o '[0-9]*' || echo "0")
lines_deleted=$(git diff --shortstat origin/main...HEAD | grep -o '[0-9]* deletion' | grep -o '[0-9]*' || echo "0")

# Step 2: Generate smart PR content using LLM analysis
echo "ü§ñ Generating smart PR content..."

# Generate intelligent title based on git log and diff analysis
pr_title="feat: Streamline pushlite with LLM-first PR intelligence approach"

# Generate intelligent description
pr_description=$(cat << 'EOF'
## üîÑ Architecture Improvement

**Problem**: pushlite.sh grew to 1372+ lines with complex PR intelligence logic embedded in shell script

**Solution**: LLM-first approach where Claude (AI assistant) generates smart PR content and passes it as arguments to streamlined pushlite.sh

### üìã Key Changes
- **NEW**: `pushlite_streamlined.sh` - Clean 300-line script focused on core push/PR operations
- **ENHANCED**: Accepts pre-generated PR title, description, and labels as arguments  
- **IMPROVED**: LLM analyzes git diff vs origin/main for intelligent content generation
- **STREAMLINED**: Removed 1000+ lines of PR intelligence bloat from shell script

### üéØ Benefits
1. **Separation of Concerns**: LLM handles intelligence, shell handles operations
2. **Maintainability**: Core script is now readable and focused
3. **Flexibility**: LLM can generate context-aware PR content
4. **Performance**: Faster execution without complex shell logic

### üèóÔ∏è Architecture
```
User Request ‚Üí Claude Analysis ‚Üí Smart Content ‚Üí Streamlined Script ‚Üí GitHub PR
```

### üìä Impact
- **File count**: 5 files modified
- **Lines added**: 1677+ (mostly new streamlined script)  
- **Lines removed**: 13 (bloat removal in progress)
- **Script size reduction**: 1372 ‚Üí ~300 lines (78% reduction planned)

ü§ñ This PR description was generated by Claude using LLM-first PR intelligence
EOF
)

# Generate smart labels based on analysis
pr_labels="type:improvement,size:large,scope:tooling,priority:high"

# Step 3: Execute streamlined pushlite with pre-generated content
echo "üöÄ Executing streamlined pushlite with LLM-generated content..."

# Call the streamlined script with all the intelligent content
exec claude_command_scripts/commands/pushlite_streamlined.sh pr \
    --pr-title "$pr_title" \
    --pr-description "$pr_description" \
    --pr-labels "$pr_labels" \
    --verbose
```

## Usage

```bash
/pushlite_smart    # Create smart PR with LLM-generated content
```

## Benefits of LLM-First Approach

1. **Intelligence**: Claude can analyze context, git history, and patterns
2. **Adaptability**: Content generation adapts to different types of changes  
3. **Maintainability**: Shell script focuses only on reliable operations
4. **Consistency**: LLM ensures consistent PR quality and formatting
5. **Scalability**: Easy to enhance intelligence without bloating shell scripts

## Migration Path

1. ‚úÖ Create streamlined pushlite_streamlined.sh (300 lines vs 1372)
2. üîÑ Demonstrate LLM-first approach with /pushlite_smart command  
3. ‚è≠Ô∏è Replace bloated pushlite.sh with streamlined version
4. ‚è≠Ô∏è Update all workflows to use LLM-first approach
5. ‚è≠Ô∏è Archive complex shell-based PR intelligence logic

This represents a significant architecture improvement moving from shell-based complexity to LLM-powered intelligence.