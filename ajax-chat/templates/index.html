<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Gemini Chat</title>
    <style>
        body { font-family: sans-serif; display: flex; flex-direction: column; align-items: center; margin: 20px; background-color: #f0f2f5; }
        .chat-container { width: 100%; max-width: 800px; }
        .card { background-color: white; padding: 30px; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); margin-bottom: 20px; }
        form { display: flex; gap: 10px; }
        input { flex-grow: 1; padding: 10px; border: 1px solid #ccc; border-radius: 4px; }
        button { padding: 10px 20px; border: none; background-color: #007bff; color: white; border-radius: 4px; cursor: pointer; }
        button:hover { background-color: #0056b3; }
        .hidden { display: none; }
        .spinner { border: 4px solid #f3f3f3; border-top: 4px solid #3498db; border-radius: 50%; width: 40px; height: 40px; animation: spin 1s linear infinite; margin: 20px auto; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        #results-container { text-align: left; }
        pre { white-space: pre-wrap; word-wrap: break-word; background-color: #eee; border: 1px solid #ddd; padding: 15px; font-family: monospace; }
        .info-box { text-align: center; margin-top: 15px; font-family: monospace; color: #666; font-size: 0.9rem; }
    </style>
</head>
<body>
    <div class="chat-container">
        <div class="card">
            <h1>Gemini 2.5 Pro Chat</h1>
            <form id="prompt-form">
                <input type="text" id="prompt-input" placeholder="Enter your prompt here..." required>
                <button type="submit">Submit</button>
            </form>
        </div>
        <div id="spinner" class="spinner hidden"></div>
        <div id="results-container" class="card hidden">
            <p><strong>Your Prompt:</strong></p>
            <pre id="prompt-display"></pre>
            <p><strong>Gemini Response:</strong></p>
            <pre id="response-display"></pre>
            <div class="info-box">
                <p>API call took: <span id="latency-display"></span> seconds.</p>
            </div>
        </div>
    </div>
    <script>
        const promptForm = document.getElementById('prompt-form');
        const promptInput = document.getElementById('prompt-input');
        const spinner = document.getElementById('spinner');
        const resultsContainer = document.getElementById('results-container');
        const promptDisplay = document.getElementById('prompt-display');
        const responseDisplay = document.getElementById('response-display');
        const latencyDisplay = document.getElementById('latency-display');
        promptForm.addEventListener('submit', async function(event) {
            event.preventDefault();
            const prompt = promptInput.value;
            spinner.classList.remove('hidden');
            resultsContainer.classList.add('hidden');
            try {
                const response = await fetch('/api/prompt', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ prompt: prompt })
                });
                const data = await response.json();
                if (!response.ok) {
                    responseDisplay.textContent = data.error || 'An unknown error occurred.';
                } else {
                    responseDisplay.textContent = data.response_text;
                    latencyDisplay.textContent = data.latency_seconds;
                }
                promptDisplay.textContent = prompt;
            } catch (error) {
                responseDisplay.textContent = `Network or fetch error: ${error.toString()}`;
            } finally {
                spinner.classList.add('hidden');
                resultsContainer.classList.remove('hidden');
            }
        });
    </script>
</body>
</html>
