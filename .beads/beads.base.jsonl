{"id":"LW-5lk","content_hash":"48e3bc1d70057f2890c479d332ff732b21e311442a49e047e0ed16ed4d067048","title":"Persist state_updates/game_state/core_memories/world_events to Firestore story/game_states for long campaigns","description":"Audit across 34 campaigns (\u003e=50 recent entries) shows no story entries contain state_updates/game_state/core_memories/world_events. game_states subcollection is empty for STpjRuwjeUt97tpCl5nK and likely others. This implies critical state is in-memory only, causing LW to forget earlier plot facts when transcript truncates.","acceptance_criteria":"- Story write path persists state_updates and/or full game_state to Firestore per turn (or at least core_memories + world_events + npc status).\n- Backfill/restore for existing campaigns is optional but document a migration path.\n- A regression test verifies LW respects a persisted fact across \u003e200 turns (no contradiction).\n- Confirm Firestore records contain the fields for new turns.","status":"open","priority":1,"issue_type":"bug","created_at":"2025-12-27T14:46:18.18582-05:00","updated_at":"2025-12-27T14:46:18.18582-05:00","source_repo":"."}
{"id":"LW-uz5","content_hash":"2eb5c56816134fede979e040b459fff1bb6dd8e7dcb8f695b7221e8825e64cab","title":"Persist game_state/core memories so LW updates don't lose critical plot facts","description":"Living World updates assume wrong facts (e.g., Flaming Fist thinks player dead) because full transcript is truncated and no game_state/core_memories are persisted to Firestore for campaign STpjRuwjeUt97tpCl5nK. Firestore shows empty game_states subcollection and story entries lack state_updates/game_state. Need durable storage of key state (core_memories, world_events, npc status) so LW step can read canonical facts after long runs/reloads.","acceptance_criteria":"- Campaign runs persist a serialized game_state (or at minimum core_memories + world_events + npc status) to Firestore per turn or at defined checkpoints.\n- story entries or game_states collection include state_updates or core_memories so critical plot facts survive truncation.\n- LW generation uses persisted state on subsequent turns/reloads and does not contradict prior captured facts in a regression test.\n- Add a regression test or replay harness that demonstrates the Horgus capture -\u003e LW event respects it.","status":"open","priority":1,"issue_type":"bug","created_at":"2025-12-27T14:42:51.008057-05:00","updated_at":"2025-12-27T14:42:51.008057-05:00","source_repo":"."}
