{"id":"worktree_agent-269","content_hash":"ea737ceb727f1376ec3a9fa1c3e2416673aa0d705d92335a07e27b61323c5472","title":"Fix CharacterCreationAgent routing to allow intent-based routing (like CombatAgent/RewardsAgent)","description":"CharacterCreationAgent currently blocks valid use cases (level-up, character recreation) by requiring state validation. Should route on semantic intent alone, similar to CombatAgent and RewardsAgent.\n\nCurrent behavior:\n- Priority 5: Requires both intent AND state → blocks \"level up\" when not in character creation\n- Priority 6: Requires state for explicit mode → blocks mode=\"character_creation\" when not active\n\nFix:\n- Priority 5: Route on intent alone (can initiate level-up/recreation)\n- Priority 6: Route on explicit mode alone (can initiate level-up/recreation)\n- Keep Priority 3: Fast path for active state is fine","acceptance_criteria":"- CharacterCreationAgent routes on semantic intent alone (MODE_CHARACTER_CREATION)\n- CharacterCreationAgent routes on explicit mode alone (mode=\"character_creation\")\n- User can say \"level up\" outside character creation → routes to CharacterCreationAgent\n- User can recreate character → routes to CharacterCreationAgent\n- Priority 3 fast path still works for active state","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-13T00:11:05.745019-08:00","updated_at":"2026-01-13T00:11:33.727627-08:00","closed_at":"2026-01-13T00:11:33.727627-08:00","source_repo":"."}
{"id":"worktree_agent-436","content_hash":"61d90955aaefe176272b654b03cf327889df442ecc7062780a50202c1800631f","title":"Add testing_mcp test for CharacterCreationAgent with real LLM calls","description":"Add testing_mcp test case to verify CharacterCreationAgent routing with real LLM calls (not mocked).\n\nTest case:\n- Create campaign\n- User says \"level up\" → verify CharacterCreationAgent routes correctly\n- Process action → verify CharacterCreationAgent handles level-up correctly\n- Use testing_mcp/lib utilities for evidence capture","acceptance_criteria":"- Testing_mcp test uses real LLM calls\n- Test verifies CharacterCreationAgent routing with real classifier\n- Test captures evidence using testing_mcp/lib utilities\n- Test passes","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-13T00:11:07.627164-08:00","updated_at":"2026-01-13T00:11:07.627164-08:00","source_repo":"."}
{"id":"worktree_agent-80b","content_hash":"dae4722d412050df7ca5dde303b10646a12b535db10efcb6f7dc3174d44ff33b","title":"Fix mode parameter case sensitivity in API Explicit Mode routing","description":"Priority 6 (API Explicit Mode) does case-sensitive string comparisons, while Priority 1 and 4 normalize mode to lowercase. This causes inconsistent behavior - mode=\"COMBAT\" fails to match constants.MODE_COMBAT.\n\nFix: Normalize mode to lowercase at the start of Priority 6 before all comparisons, matching the behavior of is_god_mode() and is_think_mode().","acceptance_criteria":"- Mode parameter is normalized to lowercase in Priority 6\n- mode=\"COMBAT\" matches constants.MODE_COMBAT\n- mode=\"REWARDS\" matches constants.MODE_REWARDS\n- mode=\"CHARACTER_CREATION\" matches constants.MODE_CHARACTER_CREATION\n- All existing tests pass\n- New test verifies case-insensitive mode handling","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-13T00:13:41.913056-08:00","updated_at":"2026-01-13T00:14:03.515724-08:00","closed_at":"2026-01-13T00:14:03.515724-08:00","source_repo":"."}
{"id":"worktree_agent-bvt","content_hash":"4bcc50cbe0a646c26a4711511925c4b9d982553ab6863276d90d83c594e6d89e","title":"Add end2end test for CharacterCreationAgent level-up routing","description":"Add end2end test similar to test_character_creation_turn1_end2end.py to verify level-up routing works through full application stack.\n\nTest case:\n- User says \"level up\" when NOT in character creation → CharacterCreationAgent handles it\n- User says \"level up\" when in character creation → CharacterCreationAgent handles it\n- Verify full request/response flow through Flask app","acceptance_criteria":"- End2end test verifies level-up routing through full stack\n- Test covers both active and inactive character creation states\n- Test uses real Flask app test client\n- Test passes","notes":"Expanding existing test_agent_selection_classifier.py to test new CharacterCreationAgent routing logic and case-insensitive mode parameters.","status":"in_progress","priority":2,"issue_type":"task","created_at":"2026-01-13T00:11:06.995452-08:00","updated_at":"2026-01-13T00:17:29.135267-08:00","source_repo":"."}
{"id":"worktree_agent-v5h","content_hash":"64ea4e35a62531ce333e588a2b7ac944d2de6831ee20f48b5f8f2db0a36fc817","title":"Add unit tests for CharacterCreationAgent intent-based routing","description":"Add unit tests to verify CharacterCreationAgent routes on semantic intent alone, similar to CombatAgent/RewardsAgent tests.\n\nTest cases:\n- test_character_creation_routes_on_intent_without_state\n- test_character_creation_routes_on_explicit_mode_without_state\n- test_character_creation_routes_on_intent_with_active_state\n- test_character_creation_level_up_intent_routes_correctly","acceptance_criteria":"- Unit tests cover intent-based routing without state\n- Unit tests cover explicit mode routing without state\n- Unit tests verify level-up intent routes correctly\n- All tests pass","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-13T00:11:06.482246-08:00","updated_at":"2026-01-13T00:11:33.901978-08:00","closed_at":"2026-01-13T00:11:33.901978-08:00","source_repo":"."}
