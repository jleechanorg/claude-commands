{"id":"worktree_worker2-ulv","content_hash":"3597c661b1fc8d7adc32239b60f1a554dd0fcd2cb6c4b1362518ef98fd3bf97f","title":"RewardsAgent rewards output inconsistent (2/4 E2E fail; rewards_box/rewards_processed missing)","description":"E2E rewards test in /tmp/worktree_worker2/claude_implement-rewards-agent-ChnfS/rewards_e2e/20251228_020823/ shows 2/4 failures: combat end rewards_processed false despite combat_summary.xp_awarded, narrative kill returns empty narrative and rewards_processed false. Recent changes: rewards_box added to JSON schema and prompts; rewards_box optional; RewardsAgent prompt stack trimmed (no DND SRD/mechanics). Need root-cause analysis: state cleanup timing, schema enforcement, prompt clarity, and provider JSON-mode behavior. Goal: ensure rewards are user-visible and rewards_processed set even with format variations, without retries/validation.","status":"open","priority":2,"issue_type":"bug","created_at":"2025-12-28T02:22:06.70204-05:00","updated_at":"2025-12-28T02:22:06.70204-05:00","source_repo":"."}
