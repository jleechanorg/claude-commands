{"id":"worktree_usg-03u","content_hash":"bda05c501557dc7f57b8bc52ddd1f34bc0afcc940571ae83eb9af326740f5cfd","title":"Codex Quota Spike Investigation - PR #3269 Safety Limits Analysis","description":"Investigation into Jan 9, 2026 Codex conversation spike (81 convos vs 17 avg) coinciding with PR #3269 that added separate workflow-specific safety limits.","design":"## Root Cause Analysis\n\n### Findings\n\n1. **Conversation Spike**: Jan 9 had 81 Codex conversations (4x normal)\n2. **Coincides with PR #3269**: Added separate safety limits per workflow\n3. **Limit Architecture**:\n   - pr_limit = 50 (total per PR across ALL workflows)\n   - global_limit = 100 (per day)\n   - workflow_limit = 10 each (pr_automation, fix_comment, codex_update, fixpr)\n\n### Potential Issue\n\nWith 4 workflows x 10 attempts each = 40 attempts per PR before hitting pr_limit of 50. Combined with global_limit of 100, this allows significant parallel automation activity.\n\n### Contributing Factors\n\n1. AGENTS.md instruction repetition: ~15.4K chars sent every turn\n2. High global_limit: 100 runs/day allows excessive usage\n3. Multiple workflow types: Each can trigger Codex independently\n4. No coordination between workflows: Workflows may run in parallel on same PR","acceptance_criteria":"1. [ ] Reduce global_limit from 100 to 50\n2. [ ] Add coordination between workflow types\n3. [ ] Consider shared counter for Codex invocations across workflows\n4. [ ] Trim AGENTS.md to reduce per-turn token waste\n5. [ ] Add monitoring for daily Codex conversation count","status":"open","priority":1,"issue_type":"bug","created_at":"2026-01-15T17:44:48.016349-08:00","updated_at":"2026-01-15T17:44:48.016349-08:00","source_repo":".","labels":["automation","codex","quota","safety-limits"]}
