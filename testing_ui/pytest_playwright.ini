[pytest]
# Playwright configuration for WorldArchitect.AI testing

# Test discovery patterns
testpaths = tests
python_files = test_*.py *_test.py
python_classes = Test*
python_functions = test_*

# Playwright specific configuration
addopts = 
    --verbose
    --tb=short
    --strict-markers
    --disable-warnings
    --browser chromium
    --browser firefox
    --browser webkit
    --headed=false
    --slowmo=0
    --video=retain-on-failure
    --screenshot=only-on-failure
    --output=tmp/test-results
    --tracing=on

# Markers for different test types
markers =
    slow: marks tests as slow (deselect with '-m "not slow"')
    integration: marks tests as integration tests
    unit: marks tests as unit tests
    smoke: marks tests as smoke tests
    regression: marks tests as regression tests
    cross_browser: marks tests for cross-browser testing
    performance: marks tests for performance testing
    accessibility: marks tests for accessibility testing
    visual: marks tests for visual regression testing

# Playwright browser configuration
browser_channel = chrome
browser_headless = true
browser_args = --no-sandbox --disable-web-security --disable-dev-shm-usage

# Base URL for tests
base_url = http://localhost:5000

# Timeout settings
timeout = 30000
navigation_timeout = 30000
expect_timeout = 5000

# Video settings
video_size = 1280x720
video_fps = 25

# Trace settings
trace_screenshots = true
trace_snapshots = true
trace_sources = true

# Retry settings
reruns = 1
reruns_delay = 1

# Parallel execution
workers = 4

# Output formatting
junit_family = xunit2
junit_logging = all
junit_log_passing_tests = true