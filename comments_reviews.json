[{"id":3670786022,"node_id":"PRR_kwDOO8L8Qs7ay7_m","user":{"login":"copilot-pull-request-reviewer[bot]","id":175728472,"node_id":"BOT_kgDOCnlnWA","avatar_url":"https://avatars.githubusercontent.com/in/946600?v=4","gravatar_id":"","url":"https://api.github.com/users/copilot-pull-request-reviewer%5Bbot%5D","html_url":"https://github.com/apps/copilot-pull-request-reviewer","followers_url":"https://api.github.com/users/copilot-pull-request-reviewer%5Bbot%5D/followers","following_url":"https://api.github.com/users/copilot-pull-request-reviewer%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/copilot-pull-request-reviewer%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/copilot-pull-request-reviewer%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/copilot-pull-request-reviewer%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/copilot-pull-request-reviewer%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/copilot-pull-request-reviewer%5Bbot%5D/repos","events_url":"https://api.github.com/users/copilot-pull-request-reviewer%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/copilot-pull-request-reviewer%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"body":"## Pull request overview\n\nThis PR fixes a bug where AI response entries were not preserving the mode parameter when persisted to Firestore. Previously, AI responses were hardcoded to use `None` for mode, making it impossible to distinguish between different interaction modes (like \"think\" or \"god\" mode) when retrieving story history.\n\n**Changes:**\n- Fixed `_persist_turn_to_firestore()` to pass the `mode` parameter to AI response story entries instead of hardcoding it to `None`\n- Added comprehensive TDD test suite covering all mode types (think, god, character, combat, rewards, info)\n\n### Reviewed changes\n\nCopilot reviewed 2 out of 2 changed files in this pull request and generated 1 comment.\n\n| File | Description |\n| ---- | ----------- |\n| mvp_site/world_logic.py | Changed line 1291 to pass `mode` parameter instead of hardcoded `None` for AI response story entries |\n| mvp_site/tests/test_persist_turn_mode.py | Added comprehensive test suite with 5 test cases covering all interaction modes to verify mode preservation |\n\n\n\n\n\n---\n\nðŸ’¡ <a href=\"/jleechanorg/worldarchitect.ai/new/main/.github/instructions?filename=*.instructions.md\" class=\"Link--inTextBlock\" target=\"_blank\" rel=\"noopener noreferrer\">Add Copilot custom instructions</a> for smarter, more guided reviews. <a href=\"https://docs.github.com/en/copilot/customizing-copilot/adding-repository-custom-instructions-for-github-copilot\" class=\"Link--inTextBlock\" target=\"_blank\" rel=\"noopener noreferrer\">Learn how to get started</a>.","state":"COMMENTED","html_url":"https://github.com/jleechanorg/worldarchitect.ai/pull/3682#pullrequestreview-3670786022","pull_request_url":"https://api.github.com/repos/jleechanorg/worldarchitect.ai/pulls/3682","author_association":"NONE","_links":{"html":{"href":"https://github.com/jleechanorg/worldarchitect.ai/pull/3682#pullrequestreview-3670786022"},"pull_request":{"href":"https://api.github.com/repos/jleechanorg/worldarchitect.ai/pulls/3682"}},"submitted_at":"2026-01-16T13:07:14Z","commit_id":"12d748a482b9aacc0bfb23150ffef9fc306d7060"},{"id":3670903644,"node_id":"PRR_kwDOO8L8Qs7azYtc","user":{"login":"jleechan2015","id":13840161,"node_id":"MDQ6VXNlcjEzODQwMTYx","avatar_url":"https://avatars.githubusercontent.com/u/13840161?u=4db42669589fcf1539408aea05f7d5db1683d520&v=4","gravatar_id":"","url":"https://api.github.com/users/jleechan2015","html_url":"https://github.com/jleechan2015","followers_url":"https://api.github.com/users/jleechan2015/followers","following_url":"https://api.github.com/users/jleechan2015/following{/other_user}","gists_url":"https://api.github.com/users/jleechan2015/gists{/gist_id}","starred_url":"https://api.github.com/users/jleechan2015/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jleechan2015/subscriptions","organizations_url":"https://api.github.com/users/jleechan2015/orgs","repos_url":"https://api.github.com/users/jleechan2015/repos","events_url":"https://api.github.com/users/jleechan2015/events{/privacy}","received_events_url":"https://api.github.com/users/jleechan2015/received_events","type":"User","user_view_type":"public","site_admin":false},"body":"","state":"COMMENTED","html_url":"https://github.com/jleechanorg/worldarchitect.ai/pull/3682#pullrequestreview-3670903644","pull_request_url":"https://api.github.com/repos/jleechanorg/worldarchitect.ai/pulls/3682","author_association":"MEMBER","_links":{"html":{"href":"https://github.com/jleechanorg/worldarchitect.ai/pull/3682#pullrequestreview-3670903644"},"pull_request":{"href":"https://api.github.com/repos/jleechanorg/worldarchitect.ai/pulls/3682"}},"submitted_at":"2026-01-16T13:37:51Z","commit_id":"12d748a482b9aacc0bfb23150ffef9fc306d7060"}]